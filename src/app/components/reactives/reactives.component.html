<div class="d-flex justify-content-between align-items-center">
  <h1>Reactive Form</h1>
  <a class="link fs-4" [routerLink]="['/templates']">
    Go to template form <i class="bi bi-arrow-right-circle"></i>
  </a>
</div>
<hr />
<form action="" method="POST" (ngSubmit)="onSubmit()" [formGroup]="form">
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputName" class="form-label">First Name</label>
      <input
        type="text"
        class="form-control"
        id="inputName"
        formControlName="firstName"
        [class.is-invalid]="isInvalidField('firstName')"
      />
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputLastName" class="form-label">Last Name</label>
      <input
        type="text"
        class="form-control"
        id="inputLastName"
        formControlName="lastName"
        [class.is-invalid]="isInvalidField('lastName')"
      />
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputEmail" class="form-label">Email</label>
      <input
        type="text"
        class="form-control"
        id="inputEmail"
        formControlName="email"
        [class.is-invalid]="isInvalidField('email')"
      />
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputEmail" class="form-label">User</label>
      <input
        type="text"
        class="form-control"
        id="inputEmail"
        formControlName="user"
        [class.is-invalid]="isInvalidField('user')"
      />
    </div>
    <div class="col-12 mt-2" *ngIf="isInvalidUser">
      <span class="text-danger"> This user already exists </span>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputEmail" class="form-label">password</label>
      <input
        type="password"
        class="form-control"
        id="inputEmail"
        formControlName="password"
        [class.is-invalid]="isInvalidField('password')"
      />
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <label for="inputEmail" class="form-label">Confirm</label>
      <input
        type="password"
        class="form-control"
        id="inputEmail"
        formControlName="confirm"
        [class.is-invalid]="matchPassword || isInvalidField('confirm')"
      />
    </div>
  </div>
  <div class="row mb-3" formGroupName="address">
    <div class="col-12">
      <span>Address</span>
    </div>
    <div class="col-6">
      <input
        type="text"
        class="form-control"
        formControlName="district"
        [class.is-invalid]="isInvalidField('address.district')"
      />
    </div>
    <div class="col-6">
      <input
        type="text"
        class="form-control"
        formControlName="city"
        [class.is-invalid]="isInvalidField('address.city')"
      />
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <table class="table table-light" *ngIf="hobbies.controls.length > 0">
        <thead>
          <tr>
            <th class="text-center">ID</th>
            <th class="text-center">Hobbie</th>
            <th class="text-center">Options</th>
          </tr>
        </thead>
        <tbody formArrayName="hobbies">
          <tr *ngFor="let item of hobbies.controls; let i = index">
            <td>{{ i + 1 }}</td>
            <td>
              <input
                class="form-control"
                type="text"
                [formControlName]="i"
                [class.is-invalid]="item.touched && item.invalid"
              />
            </td>
            <td class="align-middle d-flex justify-content-center">
              <button
                class="btn btn-transparent"
                type="button"
                (click)="removeHobbie(i)"
              >
                <i class="bi bi-trash text-danger"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-12 my-3">
      <button class="btn btn-primary" type="button" (click)="addHobie()">
        <i class="bi bi-plus"></i> Add Hobbie
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <button class="btn btn-outline-success d-block w-100">Submit</button>
    </div>
  </div>
</form>
<div class="row my-5">
  <div class="col-12">
    <p>Form Status: {{ form.valid }}</p>
  </div>
  <div class="col-12">
    <p>Status: {{ form.status }}</p>
  </div>
  <div class="col-12">
    <pre>
        {{ form.value | json }}
    </pre>
  </div>
</div>
